{"ast":null,"code":"var _jsxFileName = \"/var/www/mankan-front/components/modals/buy-product-modal/BuyProductModal.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\n\n/* eslint-disable jsx-a11y/control-has-associated-label */\nimport React, { useMemo } from 'react';\nimport Modal from 'antd/lib/modal';\nimport PropTypes from 'prop-types';\nimport { connect } from 'react-redux';\nimport dynamic from 'next/dynamic';\nimport { getProductToBuyReset } from '../../../store/buy-product/action';\nimport { wishlistChangeItem } from '../../../store/wishlist/action';\nvar ModalContent = dynamic(_c = function _c() {\n  return import('./ModalContent');\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak('./ModalContent')];\n    },\n    modules: ['./ModalContent']\n  }\n});\n_c2 = ModalContent;\n\nfunction BuyProductModal(_ref) {\n  _s();\n\n  var wishlistChangeItemAction = _ref.wishlistChangeItemAction,\n      wishlistProductIds = _ref.wishlistProductIds,\n      handleHideModal = _ref.handleHideModal,\n      product = _ref.product,\n      cart = _ref.cart,\n      user = _ref.user;\n  var data = useMemo(function () {\n    return product.data && product.data.productById || {};\n  }, [product.data]);\n  var name = useMemo(function () {\n    var _data$langs, _data$langs$;\n\n    return (data === null || data === void 0 ? void 0 : (_data$langs = data.langs) === null || _data$langs === void 0 ? void 0 : (_data$langs$ = _data$langs[0]) === null || _data$langs$ === void 0 ? void 0 : _data$langs$.name) || 'loading';\n  }, [data.name]);\n  var isInCart = !!useMemo(function () {\n    var _cart$data;\n\n    return cart === null || cart === void 0 ? void 0 : (_cart$data = cart.data) === null || _cart$data === void 0 ? void 0 : _cart$data[data.id];\n  }, [cart, data]);\n  var visible = useMemo(function () {\n    return !!((product.loading || product.data) && !product.error);\n  }, [product.loading, product.data, product.error]);\n  return __jsx(Modal, {\n    destroyOnClose: true,\n    title: name,\n    centered: true,\n    visible: visible,\n    onCancel: function onCancel() {\n      return handleHideModal();\n    },\n    footer: null,\n    className: \"buy_product_modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, (data === null || data === void 0 ? void 0 : data.name) ? __jsx(ModalContent, {\n    product: data,\n    inWishlist: !!wishlistProductIds[data.id],\n    localChanges: cart.data || {},\n    handleHideModal: handleHideModal,\n    wishlistChangeItemAction: wishlistChangeItemAction,\n    bonus: user.bonusPercent,\n    isInCart: isInCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }\n  }) : '');\n}\n\n_s(BuyProductModal, \"kw5/qpS7OBXySwNwZ187N8eNGwo=\");\n\n_c3 = BuyProductModal;\nBuyProductModal.propTypes = {\n  handleHideModal: PropTypes.func.isRequired,\n  product: PropTypes.object,\n  wishlistProductIds: PropTypes.objectOf(Object).isRequired,\n  wishlistChangeItemAction: PropTypes.func.isRequired,\n  cart: PropTypes.objectOf(Object).isRequired,\n  user: PropTypes.objectOf(Object).isRequired\n};\n\nvar mapStateToProps = function mapStateToProps(_ref2) {\n  var buyProduct = _ref2.buyProduct,\n      wishlist = _ref2.wishlist,\n      cart = _ref2.cart,\n      user = _ref2.user;\n  return {\n    product: buyProduct,\n    wishlistProductIds: wishlist.productIds,\n    cart: cart,\n    user: user\n  };\n};\n\nexport default connect(mapStateToProps, {\n  handleHideModal: getProductToBuyReset,\n  wishlistChangeItemAction: wishlistChangeItem\n})(BuyProductModal);\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ModalContent$dynamic\");\n$RefreshReg$(_c2, \"ModalContent\");\n$RefreshReg$(_c3, \"BuyProductModal\");","map":{"version":3,"sources":["/var/www/mankan-front/components/modals/buy-product-modal/BuyProductModal.js"],"names":["React","useMemo","Modal","PropTypes","connect","dynamic","getProductToBuyReset","wishlistChangeItem","ModalContent","BuyProductModal","wishlistChangeItemAction","wishlistProductIds","handleHideModal","product","cart","user","data","productById","name","langs","isInCart","id","visible","loading","error","bonusPercent","propTypes","func","isRequired","object","objectOf","Object","mapStateToProps","buyProduct","wishlist","productIds"],"mappings":";;;;;AAAA;AACA,OAAOA,KAAP,IAAgBC,OAAhB,QAA+B,OAA/B;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AAEA,OAAOC,SAAP,MAAsB,YAAtB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,OAAP,MAAoB,cAApB;AACA,SAASC,oBAAT,QAAqC,mCAArC;AACA,SAASC,kBAAT,QAAmC,gCAAnC;AAEA,IAAMC,YAAY,GAAGH,OAAO,MAAC;AAAA,SAAM,OAAO,gBAAP,CAAN;AAAA,CAAD;AAAA;AAAA;AAAA,kCAAc,gBAAd;AAAA;AAAA,cAAc,gBAAd;AAAA;AAAA,EAA5B;MAAMG,Y;;AAGN,SAASC,eAAT,OAOG;AAAA;;AAAA,MANDC,wBAMC,QANDA,wBAMC;AAAA,MALDC,kBAKC,QALDA,kBAKC;AAAA,MAJDC,eAIC,QAJDA,eAIC;AAAA,MAHDC,OAGC,QAHDA,OAGC;AAAA,MAFDC,IAEC,QAFDA,IAEC;AAAA,MADDC,IACC,QADDA,IACC;AACD,MAAMC,IAAI,GAAGf,OAAO,CAAC;AAAA,WAAQY,OAAO,CAACG,IAAR,IAAgBH,OAAO,CAACG,IAAR,CAAaC,WAA9B,IAA8C,EAArD;AAAA,GAAD,EAA2D,CAACJ,OAAO,CAACG,IAAT,CAA3D,CAApB;AACA,MAAME,IAAI,GAAGjB,OAAO,CAAC;AAAA;;AAAA,WAAM,CAACe,IAAD,aAACA,IAAD,sCAACA,IAAI,CAAEG,KAAP,gEAAC,YAAc,CAAd,CAAD,iDAAC,aAAkBD,IAAnB,KAA4B,SAAlC;AAAA,GAAD,EAA8C,CAACF,IAAI,CAACE,IAAN,CAA9C,CAApB;AACA,MAAME,QAAQ,GAAG,CAAC,CAACnB,OAAO,CAAC;AAAA;;AAAA,WAAMa,IAAN,aAAMA,IAAN,qCAAMA,IAAI,CAAEE,IAAZ,+CAAM,WAAaA,IAAI,CAACK,EAAlB,CAAN;AAAA,GAAD,EAA8B,CAACP,IAAD,EAAOE,IAAP,CAA9B,CAA1B;AAGA,MAAMM,OAAO,GAAGrB,OAAO,CAAC;AAAA,WAAM,CAAC,EAC7B,CAACY,OAAO,CAACU,OAAR,IACGV,OAAO,CAACG,IADZ,KAEI,CAACH,OAAO,CAACW,KAHgB,CAAP;AAAA,GAAD,EAIvB,CACEX,OAAO,CAACU,OADV,EAEEV,OAAO,CAACG,IAFV,EAGEH,OAAO,CAACW,KAHV,CAJuB,CAAvB;AAUA,SACE,MAAC,KAAD;AACE,IAAA,cAAc,MADhB;AAEE,IAAA,KAAK,EAAEN,IAFT;AAGE,IAAA,QAAQ,MAHV;AAIE,IAAA,OAAO,EAAEI,OAJX;AAKE,IAAA,QAAQ,EAAE;AAAA,aAAMV,eAAe,EAArB;AAAA,KALZ;AAME,IAAA,MAAM,EAAE,IANV;AAOE,IAAA,SAAS,EAAC,mBAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KASG,CAAAI,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEE,IAAN,IACC,MAAC,YAAD;AACE,IAAA,OAAO,EAAEF,IADX;AAEE,IAAA,UAAU,EAAE,CAAC,CAACL,kBAAkB,CAACK,IAAI,CAACK,EAAN,CAFlC;AAGE,IAAA,YAAY,EAAEP,IAAI,CAACE,IAAL,IAAa,EAH7B;AAIE,IAAA,eAAe,EAAEJ,eAJnB;AAKE,IAAA,wBAAwB,EAAEF,wBAL5B;AAME,IAAA,KAAK,EAAEK,IAAI,CAACU,YANd;AAOE,IAAA,QAAQ,EAAEL,QAPZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,GAUG,EAnBN,CADF;AAuBD;;GA9CQX,e;;MAAAA,e;AAiDTA,eAAe,CAACiB,SAAhB,GAA4B;AAC1Bd,EAAAA,eAAe,EAAET,SAAS,CAACwB,IAAV,CAAeC,UADN;AAE1Bf,EAAAA,OAAO,EAAEV,SAAS,CAAC0B,MAFO;AAG1BlB,EAAAA,kBAAkB,EAAER,SAAS,CAAC2B,QAAV,CAAmBC,MAAnB,EAA2BH,UAHrB;AAI1BlB,EAAAA,wBAAwB,EAAEP,SAAS,CAACwB,IAAV,CAAeC,UAJf;AAK1Bd,EAAAA,IAAI,EAAEX,SAAS,CAAC2B,QAAV,CAAmBC,MAAnB,EAA2BH,UALP;AAM1Bb,EAAAA,IAAI,EAAEZ,SAAS,CAAC2B,QAAV,CAAmBC,MAAnB,EAA2BH;AANP,CAA5B;;AASA,IAAMI,eAAe,GAAG,SAAlBA,eAAkB;AAAA,MACtBC,UADsB,SACtBA,UADsB;AAAA,MAEtBC,QAFsB,SAEtBA,QAFsB;AAAA,MAGtBpB,IAHsB,SAGtBA,IAHsB;AAAA,MAItBC,IAJsB,SAItBA,IAJsB;AAAA,SAKjB;AACLF,IAAAA,OAAO,EAAEoB,UADJ;AAELtB,IAAAA,kBAAkB,EAAEuB,QAAQ,CAACC,UAFxB;AAGLrB,IAAAA,IAAI,EAAJA,IAHK;AAILC,IAAAA,IAAI,EAAJA;AAJK,GALiB;AAAA,CAAxB;;AAYA,eAAeX,OAAO,CAAC4B,eAAD,EAAkB;AACtCpB,EAAAA,eAAe,EAAEN,oBADqB;AAEtCI,EAAAA,wBAAwB,EAAEH;AAFY,CAAlB,CAAP,CAGZE,eAHY,CAAf","sourcesContent":["/* eslint-disable jsx-a11y/control-has-associated-label */\r\nimport React, { useMemo } from 'react';\r\nimport Modal from 'antd/lib/modal';\r\n\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport dynamic from 'next/dynamic';\r\nimport { getProductToBuyReset } from '../../../store/buy-product/action';\r\nimport { wishlistChangeItem } from '../../../store/wishlist/action';\r\n\r\nconst ModalContent = dynamic(() => import('./ModalContent'));\r\n\r\n\r\nfunction BuyProductModal({\r\n  wishlistChangeItemAction,\r\n  wishlistProductIds,\r\n  handleHideModal,\r\n  product,\r\n  cart,\r\n  user,\r\n}) {\r\n  const data = useMemo(() => ((product.data && product.data.productById) || {}), [product.data]);\r\n  const name = useMemo(() => (data?.langs?.[0]?.name) || 'loading', [data.name]);\r\n  const isInCart = !!useMemo(() => cart?.data?.[data.id], [cart, data]);\r\n\r\n\r\n  const visible = useMemo(() => !!(\r\n    (product.loading\r\n     || product.data)\r\n     && !product.error),\r\n  [\r\n    product.loading,\r\n    product.data,\r\n    product.error,\r\n  ]);\r\n\r\n  return (\r\n    <Modal\r\n      destroyOnClose\r\n      title={name}\r\n      centered\r\n      visible={visible}\r\n      onCancel={() => handleHideModal()}\r\n      footer={null}\r\n      className=\"buy_product_modal\"\r\n    >\r\n      {data?.name ? (\r\n        <ModalContent\r\n          product={data}\r\n          inWishlist={!!wishlistProductIds[data.id]}\r\n          localChanges={cart.data || {}}\r\n          handleHideModal={handleHideModal}\r\n          wishlistChangeItemAction={wishlistChangeItemAction}\r\n          bonus={user.bonusPercent}\r\n          isInCart={isInCart}\r\n        />\r\n      ) : ''}\r\n    </Modal>\r\n  );\r\n}\r\n\r\n\r\nBuyProductModal.propTypes = {\r\n  handleHideModal: PropTypes.func.isRequired,\r\n  product: PropTypes.object,\r\n  wishlistProductIds: PropTypes.objectOf(Object).isRequired,\r\n  wishlistChangeItemAction: PropTypes.func.isRequired,\r\n  cart: PropTypes.objectOf(Object).isRequired,\r\n  user: PropTypes.objectOf(Object).isRequired,\r\n};\r\n\r\nconst mapStateToProps = ({\r\n  buyProduct,\r\n  wishlist,\r\n  cart,\r\n  user,\r\n}) => ({\r\n  product: buyProduct,\r\n  wishlistProductIds: wishlist.productIds,\r\n  cart,\r\n  user,\r\n});\r\n\r\nexport default connect(mapStateToProps, {\r\n  handleHideModal: getProductToBuyReset,\r\n  wishlistChangeItemAction: wishlistChangeItem,\r\n})(BuyProductModal);\r\n"]},"metadata":{},"sourceType":"module"}