{"ast":null,"code":"import { takeLatest, put, select, takeEvery } from '@redux-saga/core/effects';\nimport Router from 'next/router';\nimport { catalogFilterChange, catalogFilterChangeSuccess, catalogFilterSetValues, catalogMainSearch, catalogSetFilters, resetFilterView } from './action';\nimport { catalogGet } from '../catalog/action';\nimport { getCatalogFilterByName, selectCatalogFilters } from './reducer';\n\nfunction* workCatalogFilterChange({\n  payload: {\n    name,\n    value\n  }\n}) {\n  try {\n    if (name === 'classification' && (value === null || value === void 0 ? void 0 : value[0]) === 'all') {\n      yield put(resetFilterView());\n    } else {\n      const classificationAll = yield select(getCatalogFilterByName('classification'));\n\n      if (classificationAll[0] === 'all') {\n        yield put(catalogFilterChangeSuccess({\n          name: 'classification',\n          value: []\n        }));\n      }\n    }\n\n    yield put(catalogFilterChangeSuccess({\n      name,\n      value\n    }));\n    yield put(catalogGet({\n      name,\n      value\n    }));\n  } catch (error) {}\n}\n\nfunction* watchCatalogFilterChange() {\n  yield takeLatest(catalogFilterChange, workCatalogFilterChange);\n}\n\nfunction* workCatalogFilterSetValues({\n  payload\n}) {\n  try {\n    var _payload$classificati;\n\n    const all = payload === null || payload === void 0 ? void 0 : (_payload$classificati = payload.classification) === null || _payload$classificati === void 0 ? void 0 : _payload$classificati[0];\n\n    if (all) {\n      yield put(resetFilterView({\n        exception: 'classification'\n      }));\n    } else {\n      const classificationAll = yield select(getCatalogFilterByName('classification'));\n\n      if (classificationAll[0] === 'all') {\n        yield put(catalogFilterChangeSuccess({\n          name: 'classification',\n          value: []\n        }));\n      }\n    }\n  } catch (e) {// todo handle\n  }\n}\n\nfunction* watchCatalogFilterSetValues() {\n  yield takeEvery(catalogFilterSetValues, workCatalogFilterSetValues);\n}\n\nfunction* watchCatalogMainSearch() {\n  yield takeLatest(catalogMainSearch, function* workCatalogMainSearch({\n    payload: {\n      searchWord\n    }\n  }) {\n    try {\n      Router.push(`/catalog?searchWord=${searchWord}`);\n    } catch (e) {\n      if (false) {\n        yield;\n        console.log(e);\n      }\n    }\n  });\n}\n\nexport { watchCatalogFilterChange, watchCatalogFilterSetValues, watchCatalogMainSearch };","map":null,"metadata":{},"sourceType":"module"}