{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport Row from 'antd/lib/row';\nimport Col from 'antd/lib/col';\nimport Link from 'next/link';\nimport { useIntl } from 'react-intl';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { selectViewedProducts } from '../../store/viewed-products/reducer';\nimport { getViewedProducts } from '../../store/viewed-products/action';\nimport { selectLang } from '../../store/user/reducer';\nimport keys from '../../constants/keys';\nconst {\n  IMAGE_POSTFIX\n} = keys;\nlet lastLang = null;\n\nfunction ViewedProductsList() {\n  const {\n    messages\n  } = useIntl();\n  const {\n    data,\n    loading,\n    error\n  } = useSelector(selectViewedProducts);\n  const dispatch = useDispatch();\n  const lang = useSelector(selectLang);\n  useEffect(() => {\n    if (!(data === null || data === void 0 ? void 0 : data.length) || lastLang !== lang) {\n      lastLang = lang;\n      dispatch(getViewedProducts({\n        limit: 10\n      }));\n    }\n  }, [lang]);\n  if (error) return null;\n  if (loading) return null;\n  return (data === null || data === void 0 ? void 0 : data.length) ? __jsx(\"div\", {\n    className: \"viewed_products_list\"\n  }, __jsx(\"div\", {\n    className: \"heading\"\n  }, messages['local.viewed_products']), __jsx(Row, {\n    gutter: [15, {\n      xs: 15,\n      sm: 15,\n      md: 15,\n      lg: 15\n    }]\n  }, data.map(product => {\n    const {\n      name\n    } = product.langs[0];\n    const {\n      url,\n      alt,\n      title\n    } = product.photos[0];\n    const photoUrl = `${IMAGE_POSTFIX + product.id}/${url}`;\n    return __jsx(Col, {\n      xs: 12,\n      lg: 24,\n      xl: 12,\n      key: `view_${product.id}`\n    }, __jsx(Link, {\n      href: \"/product/[id]\",\n      as: `/product/${product.id}`\n    }, __jsx(\"a\", {\n      className: \"viewed_products_list_item\"\n    }, __jsx(\"span\", {\n      className: \"prod_image\"\n    }, __jsx(\"img\", {\n      src: photoUrl,\n      alt: alt,\n      title: title\n    })), __jsx(\"span\", {\n      className: \"prod_name\"\n    }, name))));\n  }))) : null;\n}\n\nexport default ViewedProductsList;","map":null,"metadata":{},"sourceType":"module"}