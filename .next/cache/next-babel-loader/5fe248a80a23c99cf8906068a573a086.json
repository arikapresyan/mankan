{"ast":null,"code":"import { useEffect, useRef, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport Router from 'next/router';\nimport { selectRedirectRoute } from '../../store/change-page/reducer';\nexport default function useHeader({\n  toggleVisibilityAction,\n  hideAction,\n  fixedSearchVisible\n}) {\n  const headerRef = useRef(null);\n  const {\n    0: fixedNavVisible,\n    1: setFixedNavVisible\n  } = useState(false);\n  const {\n    messages\n  } = useIntl();\n  const redirectRoute = useSelector(selectRedirectRoute);\n  const {\n    0: state,\n    1: setState\n  } = useState({\n    isMenuOpen: false\n  });\n  useEffect(() => {\n    if (redirectRoute.route) {\n      Router.push(redirectRoute.route);\n    }\n  }, [redirectRoute]);\n  useEffect(() => {\n    if (!fixedNavVisible && fixedSearchVisible) {\n      hideAction({\n        name: 'fixedSearchVisible'\n      });\n    }\n  }, [fixedNavVisible]);\n  useEffect(() => {\n    const header = headerRef.current;\n\n    const detectMenuVisibility = () => {\n      const {\n        bottom\n      } = header.getBoundingClientRect();\n\n      if (bottom < 30) {\n        setFixedNavVisible(true);\n      } else {\n        setFixedNavVisible(false);\n      }\n    };\n\n    detectMenuVisibility();\n\n    const scrollEventHandler = e => {\n      e.preventDefault();\n      detectMenuVisibility();\n    };\n\n    const clickEventHandler = e => {\n      if (!e.target.closest('.search_container.open') && fixedSearchVisible) {\n        hideAction({\n          name: 'fixedSearchVisible'\n        });\n      }\n    };\n\n    window.addEventListener('scroll', scrollEventHandler);\n    window.addEventListener('click', clickEventHandler);\n    return () => {\n      window.removeEventListener('scroll', scrollEventHandler);\n      window.removeEventListener('click', clickEventHandler);\n    };\n  }, []);\n\n  const setRegistrationVisible = () => {\n    toggleVisibilityAction({\n      name: 'registrationVisible'\n    });\n  };\n\n  const hideLogin = () => {\n    toggleVisibilityAction({\n      name: 'loginVisible'\n    });\n  };\n\n  const handleOnHideModal = name => {\n    hideAction({\n      name\n    });\n  };\n\n  const handleOnOpenModals = name => {\n    toggleVisibilityAction({\n      name\n    });\n  };\n\n  const handleOnForgotPassword = () => {\n    hideAction({\n      name: 'loginVisible'\n    });\n    toggleVisibilityAction({\n      name: 'forgotVisible'\n    });\n  };\n\n  const handleOnLoginOpen = () => {\n    toggleVisibilityAction({\n      name: 'loginVisible'\n    });\n  };\n\n  const handleMoveToRegistration = callBack => {\n    hideAction({\n      name: 'loginVisible'\n    });\n    callBack();\n  };\n\n  const handleMenuToggle = () => {\n    setState({\n      isMenuOpen: !state.isMenuOpen\n    });\n  };\n\n  const handleToggleSearchVisibility = () => {\n    toggleVisibilityAction({\n      name: 'fixedSearchVisible'\n    });\n  };\n\n  return {\n    headerRef,\n    handleMenuToggle,\n    handleToggleSearchVisibility,\n    handleMoveToRegistration,\n    handleOnLoginOpen,\n    fixedNavVisible,\n    messages,\n    setRegistrationVisible,\n    hideLogin,\n    handleOnHideModal,\n    handleOnOpenModals,\n    handleOnForgotPassword,\n    state\n  };\n}","map":{"version":3,"sources":["/var/www/mankan-front/layout/header/useHeader.js"],"names":["useEffect","useRef","useState","useIntl","useSelector","Router","selectRedirectRoute","useHeader","toggleVisibilityAction","hideAction","fixedSearchVisible","headerRef","fixedNavVisible","setFixedNavVisible","messages","redirectRoute","state","setState","isMenuOpen","route","push","name","header","current","detectMenuVisibility","bottom","getBoundingClientRect","scrollEventHandler","e","preventDefault","clickEventHandler","target","closest","window","addEventListener","removeEventListener","setRegistrationVisible","hideLogin","handleOnHideModal","handleOnOpenModals","handleOnForgotPassword","handleOnLoginOpen","handleMoveToRegistration","callBack","handleMenuToggle","handleToggleSearchVisibility"],"mappings":"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","sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport Router from 'next/router';\nimport { selectRedirectRoute } from '../../store/change-page/reducer';\n\nexport default function useHeader({ toggleVisibilityAction, hideAction, fixedSearchVisible }) {\n  const headerRef = useRef(null);\n  const [fixedNavVisible, setFixedNavVisible] = useState(false);\n  const { messages } = useIntl();\n\n  const redirectRoute = useSelector(selectRedirectRoute);\n  const [state, setState] = useState(\n    {\n      isMenuOpen: false,\n    },\n  );\n\n  useEffect(() => {\n    if (redirectRoute.route) {\n      Router.push(redirectRoute.route);\n    }\n  }, [redirectRoute]);\n\n  useEffect(() => {\n    if (!fixedNavVisible && fixedSearchVisible) {\n      hideAction({ name: 'fixedSearchVisible' });\n    }\n  }, [fixedNavVisible]);\n  useEffect(() => {\n    const header = headerRef.current;\n\n    const detectMenuVisibility = () => {\n      const { bottom } = header.getBoundingClientRect();\n      if (bottom < 30) {\n        setFixedNavVisible(true);\n      } else {\n        setFixedNavVisible(false);\n      }\n    };\n    detectMenuVisibility();\n    const scrollEventHandler = (e) => {\n      e.preventDefault();\n      detectMenuVisibility();\n    };\n    const clickEventHandler = (e) => {\n      if (!e.target.closest('.search_container.open') && fixedSearchVisible) {\n        hideAction({ name: 'fixedSearchVisible' });\n      }\n    };\n    window.addEventListener('scroll', scrollEventHandler);\n    window.addEventListener('click', clickEventHandler);\n    return () => {\n      window.removeEventListener('scroll', scrollEventHandler);\n      window.removeEventListener('click', clickEventHandler);\n    };\n  }, []);\n\n\n  const setRegistrationVisible = () => {\n    toggleVisibilityAction({ name: 'registrationVisible' });\n  };\n\n  const hideLogin = () => {\n    toggleVisibilityAction({ name: 'loginVisible' });\n  };\n\n\n  const handleOnHideModal = (name) => {\n    hideAction({ name });\n  };\n  const handleOnOpenModals = (name) => {\n    toggleVisibilityAction({ name });\n  };\n\n\n  const handleOnForgotPassword = () => {\n    hideAction({ name: 'loginVisible' });\n    toggleVisibilityAction({ name: 'forgotVisible' });\n  };\n\n  const handleOnLoginOpen = () => {\n    toggleVisibilityAction({ name: 'loginVisible' });\n  };\n  const handleMoveToRegistration = (callBack) => {\n    hideAction({ name: 'loginVisible' });\n    callBack();\n  };\n\n\n  const handleMenuToggle = () => {\n    setState({ isMenuOpen: !state.isMenuOpen });\n  };\n\n  const handleToggleSearchVisibility = () => {\n    toggleVisibilityAction({ name: 'fixedSearchVisible' });\n  };\n  return {\n    headerRef,\n    handleMenuToggle,\n    handleToggleSearchVisibility,\n    handleMoveToRegistration,\n    handleOnLoginOpen,\n    fixedNavVisible,\n    messages,\n    setRegistrationVisible,\n    hideLogin,\n    handleOnHideModal,\n    handleOnOpenModals,\n    handleOnForgotPassword,\n    state,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}