{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nvar __jsx = React.createElement;\nimport React, { useState, useCallback, useEffect } from 'react';\nimport Button from 'antd/lib/button';\nimport Modal from 'antd/lib/modal';\nimport Form from 'antd/lib/form';\nimport Upload from 'antd/lib/upload';\nimport Icon from 'antd/lib/icon';\nimport { useIntl } from 'react-intl';\nimport { useDispatch } from 'react-redux';\nimport useGlobalAPI from '../../../hooks/useGlobalAPI';\nimport { APISend } from '../../../store/global-APIS/action';\nimport userAPI from '../../../API_Paths/userAPI';\nimport { handleChange } from './constants';\n\nfunction AttachCvModal(_ref) {\n  var visible = _ref.visible,\n      handleHideModal = _ref.handleHideModal,\n      id = _ref.vacancyId;\n\n  var _useIntl = useIntl(),\n      messages = _useIntl.messages;\n\n  var dispatch = useDispatch();\n\n  var _useState = useState([]),\n      fileList = _useState[0],\n      setFileList = _useState[1];\n\n  var _useState2 = useState(false),\n      submit = _useState2[0],\n      setSubmit = _useState2[1];\n\n  var _useState3 = useState(false),\n      loading = _useState3[0],\n      setLoading = _useState3[1];\n\n  useGlobalAPI({\n    onCancel: function onCancel() {\n      setLoading(false);\n    },\n    onSuccess: function onSuccess() {\n      setLoading(false);\n      setFileList([]);\n      setSubmit(false);\n      handleHideModal();\n    }\n  });\n  var changeAction = useCallback(handleChange(setFileList, messages), [setFileList, messages]);\n  useEffect(function () {\n    return setSubmit(false);\n  }, [visible]);\n  var uploadProps = {\n    action: 'https://www.mocky.io/v2/5cc8019d300000980a055e76',\n    onChange: changeAction,\n    multiple: true,\n    accept: 'png',\n    showUploadList: {\n      showDownloadIcon: false\n    }\n  };\n\n  var sendCv = function sendCv(e) {\n    e.preventDefault();\n    setSubmit(true);\n    if (!fileList.length) return false;\n    var FD = new FormData();\n    FD.set('image', fileList[0].originFileObj);\n    FD.set('id', id);\n    setLoading(true);\n    dispatch(APISend({\n      method: 'post',\n      url: userAPI.vacancyFile,\n      data: FD\n    }));\n    return true;\n  };\n\n  return __jsx(Modal, {\n    destroyOnClose: true,\n    visible: visible,\n    onCancel: handleHideModal,\n    footer: null,\n    className: \"attach_cv_modal\"\n  }, __jsx(\"h2\", null, messages['local.attach'], ' ', \"CV\"), __jsx(Form, {\n    onSubmit: sendCv\n  }, __jsx(Form.Item, {\n    validateStatus: submit && !fileList.length ? 'error' : null,\n    help: submit && !fileList.length && 'File is required'\n  }, __jsx(Upload, _extends({}, uploadProps, {\n    fileList: fileList,\n    className: \"upload_file\",\n    accept: \".doc, .docx, application/pdf, image/jpeg\"\n  }), __jsx(Button, null, __jsx(Icon, {\n    type: \"upload\"\n  }), ' ', messages['local.download_CV_using_formats']))), __jsx(Button, {\n    disabled: loading,\n    type: \"primary\",\n    htmlType: \"submit\",\n    className: \"send_btn\"\n  }, messages['local.send'])));\n}\n\nexport default AttachCvModal;","map":null,"metadata":{},"sourceType":"module"}