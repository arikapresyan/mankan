{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useEffect } from 'react';\nimport { Row, Col } from 'antd';\nimport Link from 'next/link';\nimport { useIntl } from 'react-intl';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { selectViewedProducts } from '../../store/viewed-products/reducer';\nimport { getViewedProducts } from '../../store/viewed-products/action';\nimport { selectLang } from '../../store/user/reducer';\nimport keys from '../../constants/keys';\nvar IMAGE_POSTFIX = keys.IMAGE_POSTFIX;\nvar lastLang = null;\n\nfunction ViewedProductsList() {\n  var _useIntl = useIntl(),\n      messages = _useIntl.messages;\n\n  var _useSelector = useSelector(selectViewedProducts),\n      data = _useSelector.data,\n      loading = _useSelector.loading,\n      error = _useSelector.error;\n\n  var dispatch = useDispatch();\n  var lang = useSelector(selectLang);\n  useEffect(function () {\n    if (!(data === null || data === void 0 ? void 0 : data.length) || lastLang !== lang) {\n      lastLang = lang;\n      dispatch(getViewedProducts({\n        limit: 10\n      }));\n    }\n  }, [lang]);\n  if (error) return null;\n  if (loading) return null;\n  return (data === null || data === void 0 ? void 0 : data.length) ? __jsx(\"div\", {\n    className: \"viewed_products_list\"\n  }, __jsx(\"div\", {\n    className: \"heading\"\n  }, messages['local.viewed_products']), __jsx(Row, {\n    gutter: [15, {\n      xs: 15,\n      sm: 15,\n      md: 15,\n      lg: 15\n    }]\n  }, data.map(function (product) {\n    var name = product.langs[0].name;\n    var _product$photos$ = product.photos[0],\n        url = _product$photos$.url,\n        alt = _product$photos$.alt,\n        title = _product$photos$.title;\n    var photoUrl = \"\".concat(IMAGE_POSTFIX + product.id, \"/\").concat(url);\n    return __jsx(Col, {\n      xs: 12,\n      lg: 24,\n      xl: 12,\n      key: \"view_\".concat(product.id)\n    }, __jsx(Link, {\n      href: \"/product/[id]\",\n      as: \"/product/\".concat(product.id)\n    }, __jsx(\"a\", {\n      className: \"viewed_products_list_item\"\n    }, __jsx(\"span\", {\n      className: \"prod_image\"\n    }, __jsx(\"img\", {\n      src: photoUrl,\n      alt: alt,\n      title: title\n    })), __jsx(\"span\", {\n      className: \"prod_name\"\n    }, name))));\n  }))) : null;\n}\n\nexport default ViewedProductsList;","map":null,"metadata":{},"sourceType":"module"}