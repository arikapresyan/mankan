{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useRef, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport Router from 'next/router';\nimport { selectRedirectRoute } from '../../store/change-page/reducer';\nexport default function useHeader(_ref) {\n  _s();\n\n  var toggleVisibilityAction = _ref.toggleVisibilityAction,\n      hideAction = _ref.hideAction,\n      fixedSearchVisible = _ref.fixedSearchVisible;\n  var headerRef = useRef(null);\n\n  var _useState = useState(false),\n      fixedNavVisible = _useState[0],\n      setFixedNavVisible = _useState[1];\n\n  var _useIntl = useIntl(),\n      messages = _useIntl.messages;\n\n  var redirectRoute = useSelector(selectRedirectRoute);\n\n  var _useState2 = useState({\n    isMenuOpen: false\n  }),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  useEffect(function () {\n    if (redirectRoute.route) {\n      Router.push(redirectRoute.route);\n    }\n  }, [redirectRoute]);\n  useEffect(function () {\n    if (!fixedNavVisible && fixedSearchVisible) {\n      hideAction({\n        name: 'fixedSearchVisible'\n      });\n    }\n  }, [fixedNavVisible]);\n  useEffect(function () {\n    var header = headerRef.current;\n\n    var detectMenuVisibility = function detectMenuVisibility() {\n      var _header$getBoundingCl = header.getBoundingClientRect(),\n          bottom = _header$getBoundingCl.bottom;\n\n      if (bottom < 30) {\n        setFixedNavVisible(true);\n      } else {\n        setFixedNavVisible(false);\n      }\n    };\n\n    detectMenuVisibility();\n\n    var scrollEventHandler = function scrollEventHandler(e) {\n      e.preventDefault();\n      detectMenuVisibility();\n    };\n\n    var clickEventHandler = function clickEventHandler(e) {\n      if (!e.target.closest('.search_container.open') && fixedSearchVisible) {\n        hideAction({\n          name: 'fixedSearchVisible'\n        });\n      }\n    };\n\n    window.addEventListener('scroll', scrollEventHandler);\n    window.addEventListener('click', clickEventHandler);\n    return function () {\n      window.removeEventListener('scroll', scrollEventHandler);\n      window.removeEventListener('click', clickEventHandler);\n    };\n  }, []);\n\n  var setRegistrationVisible = function setRegistrationVisible() {\n    toggleVisibilityAction({\n      name: 'registrationVisible'\n    });\n  };\n\n  var hideLogin = function hideLogin() {\n    toggleVisibilityAction({\n      name: 'loginVisible'\n    });\n  };\n\n  var handleOnHideModal = function handleOnHideModal(name) {\n    hideAction({\n      name: name\n    });\n  };\n\n  var handleOnOpenModals = function handleOnOpenModals(name) {\n    toggleVisibilityAction({\n      name: name\n    });\n  };\n\n  var handleOnForgotPassword = function handleOnForgotPassword() {\n    hideAction({\n      name: 'loginVisible'\n    });\n    toggleVisibilityAction({\n      name: 'forgotVisible'\n    });\n  };\n\n  var handleOnLoginOpen = function handleOnLoginOpen() {\n    toggleVisibilityAction({\n      name: 'loginVisible'\n    });\n  };\n\n  var handleMoveToRegistration = function handleMoveToRegistration(callBack) {\n    hideAction({\n      name: 'loginVisible'\n    });\n    callBack();\n  };\n\n  var handleMenuToggle = function handleMenuToggle() {\n    setState({\n      isMenuOpen: !state.isMenuOpen\n    });\n  };\n\n  var handleToggleSearchVisibility = function handleToggleSearchVisibility() {\n    toggleVisibilityAction({\n      name: 'fixedSearchVisible'\n    });\n  };\n\n  return {\n    headerRef: headerRef,\n    handleMenuToggle: handleMenuToggle,\n    handleToggleSearchVisibility: handleToggleSearchVisibility,\n    handleMoveToRegistration: handleMoveToRegistration,\n    handleOnLoginOpen: handleOnLoginOpen,\n    fixedNavVisible: fixedNavVisible,\n    messages: messages,\n    setRegistrationVisible: setRegistrationVisible,\n    hideLogin: hideLogin,\n    handleOnHideModal: handleOnHideModal,\n    handleOnOpenModals: handleOnOpenModals,\n    handleOnForgotPassword: handleOnForgotPassword,\n    state: state\n  };\n}\n\n_s(useHeader, \"sChw/WIrRvQ2yjgmt5rgxWBuAhU=\", false, function () {\n  return [useIntl, useSelector];\n});","map":{"version":3,"sources":["/var/www/mankan-front/layout/header/useHeader.js"],"names":["useEffect","useRef","useState","useIntl","useSelector","Router","selectRedirectRoute","useHeader","toggleVisibilityAction","hideAction","fixedSearchVisible","headerRef","fixedNavVisible","setFixedNavVisible","messages","redirectRoute","isMenuOpen","state","setState","route","push","name","header","current","detectMenuVisibility","getBoundingClientRect","bottom","scrollEventHandler","e","preventDefault","clickEventHandler","target","closest","window","addEventListener","removeEventListener","setRegistrationVisible","hideLogin","handleOnHideModal","handleOnOpenModals","handleOnForgotPassword","handleOnLoginOpen","handleMoveToRegistration","callBack","handleMenuToggle","handleToggleSearchVisibility"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,MAApB,EAA4BC,QAA5B,QAA4C,OAA5C;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,SAASC,mBAAT,QAAoC,iCAApC;AAEA,eAAe,SAASC,SAAT,OAA+E;AAAA;;AAAA,MAA1DC,sBAA0D,QAA1DA,sBAA0D;AAAA,MAAlCC,UAAkC,QAAlCA,UAAkC;AAAA,MAAtBC,kBAAsB,QAAtBA,kBAAsB;AAC5F,MAAMC,SAAS,GAAGV,MAAM,CAAC,IAAD,CAAxB;;AAD4F,kBAE9CC,QAAQ,CAAC,KAAD,CAFsC;AAAA,MAErFU,eAFqF;AAAA,MAEpEC,kBAFoE;;AAAA,iBAGvEV,OAAO,EAHgE;AAAA,MAGpFW,QAHoF,YAGpFA,QAHoF;;AAK5F,MAAMC,aAAa,GAAGX,WAAW,CAACE,mBAAD,CAAjC;;AAL4F,mBAMlEJ,QAAQ,CAChC;AACEc,IAAAA,UAAU,EAAE;AADd,GADgC,CAN0D;AAAA,MAMrFC,KANqF;AAAA,MAM9EC,QAN8E;;AAY5FlB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIe,aAAa,CAACI,KAAlB,EAAyB;AACvBd,MAAAA,MAAM,CAACe,IAAP,CAAYL,aAAa,CAACI,KAA1B;AACD;AACF,GAJQ,EAIN,CAACJ,aAAD,CAJM,CAAT;AAMAf,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI,CAACY,eAAD,IAAoBF,kBAAxB,EAA4C;AAC1CD,MAAAA,UAAU,CAAC;AAAEY,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAV;AACD;AACF,GAJQ,EAIN,CAACT,eAAD,CAJM,CAAT;AAKAZ,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMsB,MAAM,GAAGX,SAAS,CAACY,OAAzB;;AAEA,QAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,GAAM;AAAA,kCACdF,MAAM,CAACG,qBAAP,EADc;AAAA,UACzBC,MADyB,yBACzBA,MADyB;;AAEjC,UAAIA,MAAM,GAAG,EAAb,EAAiB;AACfb,QAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACD,OAFD,MAEO;AACLA,QAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD;AACF,KAPD;;AAQAW,IAAAA,oBAAoB;;AACpB,QAAMG,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,CAAD,EAAO;AAChCA,MAAAA,CAAC,CAACC,cAAF;AACAL,MAAAA,oBAAoB;AACrB,KAHD;;AAIA,QAAMM,iBAAiB,GAAG,SAApBA,iBAAoB,CAACF,CAAD,EAAO;AAC/B,UAAI,CAACA,CAAC,CAACG,MAAF,CAASC,OAAT,CAAiB,wBAAjB,CAAD,IAA+CtB,kBAAnD,EAAuE;AACrED,QAAAA,UAAU,CAAC;AAAEY,UAAAA,IAAI,EAAE;AAAR,SAAD,CAAV;AACD;AACF,KAJD;;AAKAY,IAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCP,kBAAlC;AACAM,IAAAA,MAAM,CAACC,gBAAP,CAAwB,OAAxB,EAAiCJ,iBAAjC;AACA,WAAO,YAAM;AACXG,MAAAA,MAAM,CAACE,mBAAP,CAA2B,QAA3B,EAAqCR,kBAArC;AACAM,MAAAA,MAAM,CAACE,mBAAP,CAA2B,OAA3B,EAAoCL,iBAApC;AACD,KAHD;AAID,GA3BQ,EA2BN,EA3BM,CAAT;;AA8BA,MAAMM,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AACnC5B,IAAAA,sBAAsB,CAAC;AAAEa,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAtB;AACD,GAFD;;AAIA,MAAMgB,SAAS,GAAG,SAAZA,SAAY,GAAM;AACtB7B,IAAAA,sBAAsB,CAAC;AAAEa,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAtB;AACD,GAFD;;AAKA,MAAMiB,iBAAiB,GAAG,SAApBA,iBAAoB,CAACjB,IAAD,EAAU;AAClCZ,IAAAA,UAAU,CAAC;AAAEY,MAAAA,IAAI,EAAJA;AAAF,KAAD,CAAV;AACD,GAFD;;AAGA,MAAMkB,kBAAkB,GAAG,SAArBA,kBAAqB,CAAClB,IAAD,EAAU;AACnCb,IAAAA,sBAAsB,CAAC;AAAEa,MAAAA,IAAI,EAAJA;AAAF,KAAD,CAAtB;AACD,GAFD;;AAKA,MAAMmB,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AACnC/B,IAAAA,UAAU,CAAC;AAAEY,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAV;AACAb,IAAAA,sBAAsB,CAAC;AAAEa,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAtB;AACD,GAHD;;AAKA,MAAMoB,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC9BjC,IAAAA,sBAAsB,CAAC;AAAEa,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAtB;AACD,GAFD;;AAGA,MAAMqB,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACC,QAAD,EAAc;AAC7ClC,IAAAA,UAAU,CAAC;AAAEY,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAV;AACAsB,IAAAA,QAAQ;AACT,GAHD;;AAMA,MAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC7B1B,IAAAA,QAAQ,CAAC;AAAEF,MAAAA,UAAU,EAAE,CAACC,KAAK,CAACD;AAArB,KAAD,CAAR;AACD,GAFD;;AAIA,MAAM6B,4BAA4B,GAAG,SAA/BA,4BAA+B,GAAM;AACzCrC,IAAAA,sBAAsB,CAAC;AAAEa,MAAAA,IAAI,EAAE;AAAR,KAAD,CAAtB;AACD,GAFD;;AAGA,SAAO;AACLV,IAAAA,SAAS,EAATA,SADK;AAELiC,IAAAA,gBAAgB,EAAhBA,gBAFK;AAGLC,IAAAA,4BAA4B,EAA5BA,4BAHK;AAILH,IAAAA,wBAAwB,EAAxBA,wBAJK;AAKLD,IAAAA,iBAAiB,EAAjBA,iBALK;AAML7B,IAAAA,eAAe,EAAfA,eANK;AAOLE,IAAAA,QAAQ,EAARA,QAPK;AAQLsB,IAAAA,sBAAsB,EAAtBA,sBARK;AASLC,IAAAA,SAAS,EAATA,SATK;AAULC,IAAAA,iBAAiB,EAAjBA,iBAVK;AAWLC,IAAAA,kBAAkB,EAAlBA,kBAXK;AAYLC,IAAAA,sBAAsB,EAAtBA,sBAZK;AAaLvB,IAAAA,KAAK,EAALA;AAbK,GAAP;AAeD;;GA1GuBV,S;UAGDJ,O,EAECC,W","sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport { useIntl } from 'react-intl';\nimport { useSelector } from 'react-redux';\nimport Router from 'next/router';\nimport { selectRedirectRoute } from '../../store/change-page/reducer';\n\nexport default function useHeader({ toggleVisibilityAction, hideAction, fixedSearchVisible }) {\n  const headerRef = useRef(null);\n  const [fixedNavVisible, setFixedNavVisible] = useState(false);\n  const { messages } = useIntl();\n\n  const redirectRoute = useSelector(selectRedirectRoute);\n  const [state, setState] = useState(\n    {\n      isMenuOpen: false,\n    },\n  );\n\n  useEffect(() => {\n    if (redirectRoute.route) {\n      Router.push(redirectRoute.route);\n    }\n  }, [redirectRoute]);\n\n  useEffect(() => {\n    if (!fixedNavVisible && fixedSearchVisible) {\n      hideAction({ name: 'fixedSearchVisible' });\n    }\n  }, [fixedNavVisible]);\n  useEffect(() => {\n    const header = headerRef.current;\n\n    const detectMenuVisibility = () => {\n      const { bottom } = header.getBoundingClientRect();\n      if (bottom < 30) {\n        setFixedNavVisible(true);\n      } else {\n        setFixedNavVisible(false);\n      }\n    };\n    detectMenuVisibility();\n    const scrollEventHandler = (e) => {\n      e.preventDefault();\n      detectMenuVisibility();\n    };\n    const clickEventHandler = (e) => {\n      if (!e.target.closest('.search_container.open') && fixedSearchVisible) {\n        hideAction({ name: 'fixedSearchVisible' });\n      }\n    };\n    window.addEventListener('scroll', scrollEventHandler);\n    window.addEventListener('click', clickEventHandler);\n    return () => {\n      window.removeEventListener('scroll', scrollEventHandler);\n      window.removeEventListener('click', clickEventHandler);\n    };\n  }, []);\n\n\n  const setRegistrationVisible = () => {\n    toggleVisibilityAction({ name: 'registrationVisible' });\n  };\n\n  const hideLogin = () => {\n    toggleVisibilityAction({ name: 'loginVisible' });\n  };\n\n\n  const handleOnHideModal = (name) => {\n    hideAction({ name });\n  };\n  const handleOnOpenModals = (name) => {\n    toggleVisibilityAction({ name });\n  };\n\n\n  const handleOnForgotPassword = () => {\n    hideAction({ name: 'loginVisible' });\n    toggleVisibilityAction({ name: 'forgotVisible' });\n  };\n\n  const handleOnLoginOpen = () => {\n    toggleVisibilityAction({ name: 'loginVisible' });\n  };\n  const handleMoveToRegistration = (callBack) => {\n    hideAction({ name: 'loginVisible' });\n    callBack();\n  };\n\n\n  const handleMenuToggle = () => {\n    setState({ isMenuOpen: !state.isMenuOpen });\n  };\n\n  const handleToggleSearchVisibility = () => {\n    toggleVisibilityAction({ name: 'fixedSearchVisible' });\n  };\n  return {\n    headerRef,\n    handleMenuToggle,\n    handleToggleSearchVisibility,\n    handleMoveToRegistration,\n    handleOnLoginOpen,\n    fixedNavVisible,\n    messages,\n    setRegistrationVisible,\n    hideLogin,\n    handleOnHideModal,\n    handleOnOpenModals,\n    handleOnForgotPassword,\n    state,\n  };\n}\n"]},"metadata":{},"sourceType":"module"}