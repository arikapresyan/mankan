{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nconst regex = {\n  name: /^\\p{L}+$/u,\n  string: /\\`|\\~|\\!|\\@|\\#|\\$|\\%|\\^|\\&|\\*|\\(|\\)|\\+|\\=|\\[|\\{|\\]|\\}|\\||\\\\|\\'|\\<|\\,|\\.|\\>|\\?|\\/|\\\"|\\\"|\\;|\\:|[0-9]/g,\n  // phone: /^[\\+]?[0-9\\s]*$/im,\n  phone: /^[\\+]?[(]?[0-9]+$/i,\n  email: /^([\\w\\!\\#$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`{\\|\\}\\~]+\\.)*[\\w\\!\\#$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`{\\|\\}\\~]+@((((([a-z0-9]{1}[a-z0-9\\-]{0,62}[a-z0-9]{1})|[a-z])\\.)+[a-z]{2,6})|(\\d{1,3}\\.){3}\\d{1,3}(\\:\\d{1,5})?)$/\n};\n\nfunction setLocalStorageObj(name, obj) {\n  localStorage.setItem(name, JSON.stringify(obj));\n}\n\nfunction getLocalStorageObj(name) {\n  return JSON.parse(localStorage.getItem(name));\n}\n\nfunction removeLocalStorageObj(name) {\n  return localStorage.removeItem(name);\n}\n\nconst getProductSizeFromObj = size => size && `${size.height ? `${size.height} x` : ''}\n ${size.length ? `${size.length} x` : ''}\n ${size.width ? `${size.width}` : ''}`;\n\nconst getProductBoxSize = boxSize => {\n  if (!boxSize) return null;\n  const {\n    width,\n    height,\n    length\n  } = boxSize;\n  if (!width && !height && !length) return null;\n  return `${height ? `${height} x` : ''} ${length ? `${length} x` : ''} ${width || '-'}`;\n};\n\nconst getProductBrand = brand => brand && brand[0] && brand[0].name;\n\nconst getBonus = (price, percent, count) => Math.ceil(count * (+price * (+percent / 100)));\n\nconst getProductAge = (minAge, maxAge, messages) => {\n  if (maxAge > 8) maxAge = '8+';\n  if (minAge === 8) return `8+ ${messages ? messages['local.years'] : ''}`;\n  return `${minAge} - ${maxAge} ${messages ? messages['local.years'] : ''}`;\n};\n\nconst getProductBattery = accessories => {\n  if (accessories && accessories.length) {\n    return accessories.find(({\n      ProductAccessoriesMap: {\n        type: accessoryType\n      }\n    }) => accessoryType === 'battery');\n  }\n\n  return null;\n};\n\nconst addToCartObj = ({\n  product,\n  count,\n  battery,\n  hasBattery\n}) => {\n  var _battery$ProductAcces, _battery$ProductAcces2, _basket$battery$id;\n\n  let newCount = (battery === null || battery === void 0 ? void 0 : (_battery$ProductAcces = battery.ProductAccessoriesMap) === null || _battery$ProductAcces === void 0 ? void 0 : _battery$ProductAcces.count) * count;\n  const maxCount = battery === null || battery === void 0 ? void 0 : battery.xmlCount;\n  const batteryNeededCunt = (battery === null || battery === void 0 ? void 0 : (_battery$ProductAcces2 = battery.ProductAccessoriesMap) === null || _battery$ProductAcces2 === void 0 ? void 0 : _battery$ProductAcces2.count) * count;\n  const basket = getLocalStorageObj('cart'); // const productIn = basket?.[product.id];\n\n  const batteryInBasketCount = (basket === null || basket === void 0 ? void 0 : (_basket$battery$id = basket[battery === null || battery === void 0 ? void 0 : battery.id]) === null || _basket$battery$id === void 0 ? void 0 : _basket$battery$id.count) || 0;\n\n  if (hasBattery) {\n    const plusCount = batteryInBasketCount + batteryNeededCunt;\n\n    if (maxCount < plusCount && plusCount < 10) {\n      newCount = maxCount - batteryInBasketCount;\n    } else if (plusCount > 10) {\n      newCount = 10 - batteryInBasketCount;\n    }\n  }\n\n  return _objectSpread({\n    [product.id]: _objectSpread({\n      id: product.id,\n      count,\n      status: true\n    }, hasBattery ? {\n      batteryId: battery.id\n    } : {})\n  }, hasBattery ? {\n    [battery.id]: {\n      id: battery.id,\n      count: newCount,\n      status: true,\n      type: 'battery'\n    }\n  } : {});\n};\n\nconst getTooltipTexts = msg => ({\n  bonusText: msg['local.sign_up_for_bonus'],\n  promoText: msg['local.follow_us_for_promo']\n});\n\nconst createObjectArrayFromObject = (object, callback, limit) => {\n  const keys = Object.keys(object);\n  const {\n    length\n  } = keys;\n  const arr = [];\n  const maxItems = length > limit ? limit : length;\n  keys.forEach((key, index) => {\n    if (index < maxItems) {\n      arr.push(callback(object[key]));\n    }\n  });\n  return arr;\n};\n\nconst C_TOKEN = 'mnktkn';\nexport { regex, setLocalStorageObj, getLocalStorageObj, removeLocalStorageObj, getProductSizeFromObj, getBonus, getProductBrand, getProductAge, getProductBattery, addToCartObj, createObjectArrayFromObject, C_TOKEN, getTooltipTexts, getProductBoxSize };","map":{"version":3,"sources":["/var/www/mankan-front/constants/utils.js"],"names":["regex","name","string","phone","email","setLocalStorageObj","obj","localStorage","setItem","JSON","stringify","getLocalStorageObj","parse","getItem","removeLocalStorageObj","removeItem","getProductSizeFromObj","size","height","length","width","getProductBoxSize","boxSize","getProductBrand","brand","getBonus","price","percent","count","Math","ceil","getProductAge","minAge","maxAge","messages","getProductBattery","accessories","find","ProductAccessoriesMap","type","accessoryType","addToCartObj","product","battery","hasBattery","newCount","maxCount","xmlCount","batteryNeededCunt","basket","batteryInBasketCount","id","plusCount","status","batteryId","getTooltipTexts","msg","bonusText","promoText","createObjectArrayFromObject","object","callback","limit","keys","Object","arr","maxItems","forEach","key","index","push","C_TOKEN"],"mappings":"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","sourcesContent":["const regex = {\n  name: /^\\p{L}+$/u,\n  string: /\\`|\\~|\\!|\\@|\\#|\\$|\\%|\\^|\\&|\\*|\\(|\\)|\\+|\\=|\\[|\\{|\\]|\\}|\\||\\\\|\\'|\\<|\\,|\\.|\\>|\\?|\\/|\\\"|\\\"|\\;|\\:|[0-9]/g,\n  // phone: /^[\\+]?[0-9\\s]*$/im,\n  phone: /^[\\+]?[(]?[0-9]+$/i,\n  email: /^([\\w\\!\\#$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`{\\|\\}\\~]+\\.)*[\\w\\!\\#$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`{\\|\\}\\~]+@((((([a-z0-9]{1}[a-z0-9\\-]{0,62}[a-z0-9]{1})|[a-z])\\.)+[a-z]{2,6})|(\\d{1,3}\\.){3}\\d{1,3}(\\:\\d{1,5})?)$/,\n};\n\nfunction setLocalStorageObj(name, obj) {\n  localStorage.setItem(name, JSON.stringify(obj));\n}\n\nfunction getLocalStorageObj(name) {\n  return JSON.parse(localStorage.getItem(name));\n}\nfunction removeLocalStorageObj(name) {\n  return localStorage.removeItem(name);\n}\n\nconst getProductSizeFromObj = (size) => (size && `${size.height ? `${size.height} x` : ''}\n ${size.length ? `${size.length} x` : ''}\n ${size.width ? `${size.width}` : ''}`);\n\nconst getProductBoxSize = (boxSize) => {\n  if (!boxSize) return null;\n  const { width, height, length } = boxSize;\n  if (!width && !height && !length) return null;\n  return `${height ? `${height} x` : ''} ${length ? `${length} x` : ''} ${width || '-'}`;\n};\n\nconst getProductBrand = (brand) => brand && brand[0] && brand[0].name;\n\nconst getBonus = (price, percent, count) => Math.ceil(count * (+price * (+percent / 100)));\n\nconst getProductAge = (minAge, maxAge, messages) => {\n  if (maxAge > 8) maxAge = '8+';\n  if (minAge === 8) return `8+ ${messages ? messages['local.years'] : ''}`;\n  return `${minAge} - ${maxAge} ${messages ? messages['local.years'] : ''}`;\n};\n\nconst getProductBattery = (accessories) => {\n  if (accessories && accessories.length) {\n    return accessories.find(({\n      ProductAccessoriesMap:\n              { type: accessoryType },\n    }) => accessoryType === 'battery');\n  }\n  return null;\n};\n\nconst addToCartObj = ({\n  product, count, battery, hasBattery,\n}) => {\n  let newCount = battery?.ProductAccessoriesMap?.count * count;\n  const maxCount = battery?.xmlCount;\n  const batteryNeededCunt = battery?.ProductAccessoriesMap?.count * count;\n  const basket = getLocalStorageObj('cart');\n  // const productIn = basket?.[product.id];\n  const batteryInBasketCount = basket?.[battery?.id]?.count || 0;\n\n  if (hasBattery) {\n    const plusCount = batteryInBasketCount + batteryNeededCunt;\n\n    if (maxCount < plusCount && plusCount < 10) {\n      newCount = maxCount - batteryInBasketCount;\n    } else if (plusCount > 10) {\n      newCount = 10 - batteryInBasketCount;\n    }\n  }\n  return ({\n    [product.id]: {\n      id: product.id, count, status: true, ...(hasBattery ? { batteryId: battery.id } : {}),\n    },\n    ...(hasBattery ? {\n      [battery.id]: {\n        id: battery.id,\n        count: newCount,\n        status: true,\n        type: 'battery',\n      },\n    } : {}),\n  });\n};\n\nconst getTooltipTexts = (msg) => ({\n  bonusText: msg['local.sign_up_for_bonus'],\n  promoText: msg['local.follow_us_for_promo'],\n});\n\nconst createObjectArrayFromObject = (object, callback, limit) => {\n  const keys = Object.keys(object);\n  const { length } = keys;\n  const arr = [];\n  const maxItems = length > limit ? limit : length;\n  keys.forEach((key, index) => {\n    if (index < maxItems) {\n      arr.push(callback(object[key]));\n    }\n  });\n  return arr;\n};\n\nconst C_TOKEN = 'mnktkn';\n\nexport {\n  regex,\n  setLocalStorageObj,\n  getLocalStorageObj,\n  removeLocalStorageObj,\n  getProductSizeFromObj,\n  getBonus,\n  getProductBrand,\n  getProductAge,\n  getProductBattery,\n  addToCartObj,\n  createObjectArrayFromObject,\n  C_TOKEN,\n  getTooltipTexts,\n  getProductBoxSize,\n};\n"]},"metadata":{},"sourceType":"module"}