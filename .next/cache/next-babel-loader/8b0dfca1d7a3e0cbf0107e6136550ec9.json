{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nvar _marked = /*#__PURE__*/_regeneratorRuntime.mark(workAccompanying),\n    _marked2 = /*#__PURE__*/_regeneratorRuntime.mark(watchAccompanying),\n    _marked3 = /*#__PURE__*/_regeneratorRuntime.mark(_callee);\n\nimport { put, takeLatest, select, call, all } from '@redux-saga/core/effects';\nimport { getAccompanyingProduct, getAccompanyingProductSuccess, getAccompanyingProductError } from './action';\nimport { selectCart } from '../cart/reducer';\nimport Axios from '../services/Axios';\nimport { selectLang } from '../user/reducer';\n\nfunction getAccompanyingProductRequest(_ref) {\n  var ids = _ref.ids,\n      lang = _ref.lang;\n  return Axios.request({\n    method: 'post',\n    url: '/api/product/escorting',\n    data: {\n      ids: ids,\n      lang: lang\n    }\n  });\n}\n\nfunction workAccompanying() {\n  var ids, lang, _yield$call, escortingProducts;\n\n  return _regeneratorRuntime.wrap(function workAccompanying$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.t0 = Object;\n          _context.next = 3;\n          return select(selectCart);\n\n        case 3:\n          _context.t1 = _context.sent;\n          ids = _context.t0.keys.call(_context.t0, _context.t1);\n          _context.next = 7;\n          return select(selectLang);\n\n        case 7:\n          lang = _context.sent;\n          _context.prev = 8;\n\n          if (ids.length) {\n            _context.next = 11;\n            break;\n          }\n\n          throw new Error();\n\n        case 11:\n          _context.next = 13;\n          return call(getAccompanyingProductRequest, {\n            ids: ids,\n            lang: lang\n          });\n\n        case 13:\n          _yield$call = _context.sent;\n          escortingProducts = _yield$call.data.escortingProducts;\n          _context.next = 17;\n          return put(getAccompanyingProductSuccess({\n            data: escortingProducts\n          }));\n\n        case 17:\n          _context.next = 23;\n          break;\n\n        case 19:\n          _context.prev = 19;\n          _context.t2 = _context[\"catch\"](8);\n          _context.next = 23;\n          return put(getAccompanyingProductError());\n\n        case 23:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[8, 19]]);\n}\n\nfunction watchAccompanying() {\n  return _regeneratorRuntime.wrap(function watchAccompanying$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return takeLatest(getAccompanyingProduct, workAccompanying);\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2);\n}\n\nexport default function _callee() {\n  return _regeneratorRuntime.wrap(function _callee$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.next = 2;\n          return all([watchAccompanying()]);\n\n        case 2:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3);\n}","map":{"version":3,"sources":["/var/www/mankan-front/store/accompanying-product/saga.js"],"names":["workAccompanying","watchAccompanying","put","takeLatest","select","call","all","getAccompanyingProduct","getAccompanyingProductSuccess","getAccompanyingProductError","selectCart","Axios","selectLang","getAccompanyingProductRequest","ids","lang","request","method","url","data","Object","keys","length","Error","escortingProducts"],"mappings":";;oDAoBUA,gB;qDAkBAC,iB;;;AAtCV,SACEC,GADF,EACOC,UADP,EACmBC,MADnB,EAC2BC,IAD3B,EACiCC,GADjC,QAEO,0BAFP;AAGA,SACEC,sBADF,EAEEC,6BAFF,EAGEC,2BAHF,QAIO,UAJP;AAKA,SAASC,UAAT,QAA2B,iBAA3B;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,SAASC,UAAT,QAA2B,iBAA3B;;AAEA,SAASC,6BAAT,OAAsD;AAAA,MAAbC,GAAa,QAAbA,GAAa;AAAA,MAARC,IAAQ,QAARA,IAAQ;AACpD,SAAOJ,KAAK,CAACK,OAAN,CAAc;AACnBC,IAAAA,MAAM,EAAE,MADW;AAEnBC,IAAAA,GAAG,EAAE,wBAFc;AAGnBC,IAAAA,IAAI,EAAE;AAAEL,MAAAA,GAAG,EAAHA,GAAF;AAAOC,MAAAA,IAAI,EAAJA;AAAP;AAHa,GAAd,CAAP;AAKD;;AAED,SAAUf,gBAAV;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,wBACcoB,MADd;AAAA;AAC0B,iBAAMhB,MAAM,CAACM,UAAD,CAAZ;;AAD1B;AAAA;AACQI,UAAAA,GADR,eACqBO,IADrB;AAAA;AAEe,iBAAMjB,MAAM,CAACQ,UAAD,CAAZ;;AAFf;AAEQG,UAAAA,IAFR;AAAA;;AAAA,cAISD,GAAG,CAACQ,MAJb;AAAA;AAAA;AAAA;;AAAA,gBAI2B,IAAIC,KAAJ,EAJ3B;;AAAA;AAAA;AAQQ,iBAAMlB,IAAI,CAACQ,6BAAD,EAAgC;AAC5CC,YAAAA,GAAG,EAAHA,GAD4C;AAE5CC,YAAAA,IAAI,EAAJA;AAF4C,WAAhC,CAAV;;AARR;AAAA;AAOcS,UAAAA,iBAPd,eAOML,IAPN,CAOcK,iBAPd;AAAA;AAYI,iBAAMtB,GAAG,CAACM,6BAA6B,CAAC;AAAEW,YAAAA,IAAI,EAAEK;AAAR,WAAD,CAA9B,CAAT;;AAZJ;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAcI,iBAAMtB,GAAG,CAACO,2BAA2B,EAA5B,CAAT;;AAdJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAkBA,SAAUR,iBAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,iBAAME,UAAU,CAACI,sBAAD,EAAyBP,gBAAzB,CAAhB;;AADF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAGA,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AACb,iBAAMM,GAAG,CAAC,CACRL,iBAAiB,EADT,CAAD,CAAT;;AADa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA","sourcesContent":["import {\n  put, takeLatest, select, call, all,\n} from '@redux-saga/core/effects';\nimport {\n  getAccompanyingProduct,\n  getAccompanyingProductSuccess,\n  getAccompanyingProductError,\n} from './action';\nimport { selectCart } from '../cart/reducer';\nimport Axios from '../services/Axios';\nimport { selectLang } from '../user/reducer';\n\nfunction getAccompanyingProductRequest({ ids, lang }) {\n  return Axios.request({\n    method: 'post',\n    url: '/api/product/escorting',\n    data: { ids, lang },\n  });\n}\n\nfunction* workAccompanying() {\n  const ids = Object.keys(yield select(selectCart));\n  const lang = yield select(selectLang);\n  try {\n    if (!ids.length) throw new Error();\n\n    const {\n      data: { escortingProducts },\n    } = yield call(getAccompanyingProductRequest, {\n      ids,\n      lang,\n    });\n    yield put(getAccompanyingProductSuccess({ data: escortingProducts }));\n  } catch (error) {\n    yield put(getAccompanyingProductError());\n  }\n}\n\nfunction* watchAccompanying() {\n  yield takeLatest(getAccompanyingProduct, workAccompanying);\n}\nexport default function* () {\n  yield all([\n    watchAccompanying(),\n  ]);\n}\n"]},"metadata":{},"sourceType":"module"}