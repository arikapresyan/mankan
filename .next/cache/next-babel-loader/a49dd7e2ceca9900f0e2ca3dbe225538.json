{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nvar _handleActions;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { handleActions } from 'redux-actions';\nimport { cartChangeProduct, resetCartReducer, changeCart, changeCartSuccess, changeCartError, cartSetAll, sendOrder, sendOrderSuccess, sendOrderError } from './action';\nimport { addLoadingItems } from './handleFunctions';\nvar initialState = {\n  loading: {},\n  error: false,\n  data: {},\n  order: {\n    loading: false,\n    error: false\n  },\n  cartSetCounter: 0\n};\nexport default handleActions((_handleActions = {}, _defineProperty(_handleActions, changeCart, function (state, _ref) {\n  var ids = _ref.payload.ids;\n  return _objectSpread(_objectSpread({}, state), {}, {\n    loading: addLoadingItems(state, ids),\n    error: false\n  });\n}), _defineProperty(_handleActions, changeCartSuccess, function (state, _ref2) {\n  var _ref2$payload = _ref2.payload,\n      id = _ref2$payload.id,\n      data = _ref2$payload.data;\n  return _objectSpread(_objectSpread({}, state), {}, {\n    loading: _objectSpread(_objectSpread({}, state.loading), {}, _defineProperty({}, id, false)),\n    error: false,\n    data: data\n  });\n}), _defineProperty(_handleActions, changeCartError, function (state, _ref3) {\n  var ids = _ref3.payload.ids;\n  return _objectSpread(_objectSpread({}, state), {}, {\n    loading: _objectSpread(_objectSpread({}, state.loading), {}, {\n      loading: addLoadingItems(state, ids, true)\n    }),\n    error: true\n  });\n}), _defineProperty(_handleActions, cartChangeProduct, function (state, _ref4) {\n  var _ref4$payload = _ref4.payload,\n      id = _ref4$payload.id,\n      changes = _ref4$payload.changes;\n  return _objectSpread(_objectSpread({}, state), {}, {\n    data: _objectSpread(_objectSpread({}, state.data), {}, _defineProperty({}, id, _objectSpread(_objectSpread({}, state[id]), changes)))\n  });\n}), _defineProperty(_handleActions, cartSetAll, function (state, _ref5) {\n  var cart = _ref5.payload.cart;\n  return _objectSpread(_objectSpread({}, state), {}, {\n    data: cart,\n    cartSetCounter: state.cartSetCounter + 1\n  });\n}), _defineProperty(_handleActions, resetCartReducer, function (state) {\n  return _objectSpread(_objectSpread({}, initialState), {}, {\n    cartSetCounter: state.cartSetCounter\n  });\n}), _defineProperty(_handleActions, sendOrder, function (state) {\n  return _objectSpread(_objectSpread({}, state), {}, {\n    order: {\n      error: false,\n      loading: true\n    }\n  });\n}), _defineProperty(_handleActions, sendOrderSuccess, function (state) {\n  return _objectSpread(_objectSpread({}, state), {}, {\n    data: {},\n    order: {\n      error: false,\n      loading: false\n    }\n  });\n}), _defineProperty(_handleActions, sendOrderError, function (state) {\n  return _objectSpread(_objectSpread({}, state), {}, {\n    order: {\n      error: true,\n      loading: false\n    }\n  });\n}), _handleActions), initialState);\nexport function getTotalPrice(store) {\n  var data = store.cart.data;\n  var keys = Object.keys(data);\n  var total = 0;\n  keys.forEach(function (key) {\n    total += (data[key] && data[key].price || 200) * (data[key] && data[key].count || 1);\n  });\n  return total;\n}\nexport function getTotalCount(store) {\n  var cart = store.cart;\n  return Object.keys(cart.data).length;\n}\nexport var selectCart = function selectCart(_ref6) {\n  var cart = _ref6.cart;\n  return cart.data;\n};","map":{"version":3,"sources":["/var/www/mankan-front/store/cart/reducer.js"],"names":["handleActions","cartChangeProduct","resetCartReducer","changeCart","changeCartSuccess","changeCartError","cartSetAll","sendOrder","sendOrderSuccess","sendOrderError","addLoadingItems","initialState","loading","error","data","order","cartSetCounter","state","ids","payload","id","changes","cart","getTotalPrice","store","keys","Object","total","forEach","key","price","count","getTotalCount","length","selectCart"],"mappings":"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","sourcesContent":["import { handleActions } from 'redux-actions';\n\nimport {\n  cartChangeProduct,\n  resetCartReducer,\n  changeCart,\n  changeCartSuccess,\n  changeCartError,\n  cartSetAll,\n  sendOrder,\n  sendOrderSuccess,\n  sendOrderError,\n} from './action';\nimport { addLoadingItems } from './handleFunctions';\n\n\nconst initialState = {\n  loading: {},\n  error: false,\n  data: {},\n  order: {\n    loading: false,\n    error: false,\n  },\n  cartSetCounter: 0,\n};\n\nexport default handleActions({\n\n\n  [changeCart]: (state, { payload: { ids } }) => ({\n    ...state,\n    loading: addLoadingItems(state, ids),\n    error: false,\n  }),\n\n  [changeCartSuccess]: (state, { payload: { id, data } }) => ({\n    ...state,\n    loading: { ...state.loading, [id]: false },\n    error: false,\n    data,\n  }),\n  [changeCartError]: (state, { payload: { ids } }) => ({\n    ...state,\n    loading: { ...state.loading, loading: addLoadingItems(state, ids, true) },\n    error: true,\n  }),\n\n  [cartChangeProduct]: (\n    state,\n    { payload: { id, changes } },\n  ) => ({\n    ...state,\n    data: {\n      ...state.data,\n      [id]: {\n        ...state[id],\n        ...changes,\n      },\n    },\n  }),\n\n  [cartSetAll]: (state, { payload: { cart } }) => ({\n    ...state,\n    data: cart,\n    cartSetCounter: state.cartSetCounter + 1,\n  }),\n  [resetCartReducer]: (state) => ({ ...initialState, cartSetCounter: state.cartSetCounter }),\n  [sendOrder]: (state) => ({\n    ...state,\n    order: {\n      error: false,\n      loading: true,\n    },\n  }),\n  [sendOrderSuccess]: (state) => ({ ...state, data: {}, order: { error: false, loading: false } }),\n  [sendOrderError]: (state) => ({ ...state, order: { error: true, loading: false } }),\n\n}, initialState);\n\n\nexport function getTotalPrice(store) {\n  const { cart: { data } } = store;\n  const keys = Object.keys(data);\n  let total = 0;\n\n  keys.forEach((key) => {\n    total += ((data[key] && data[key].price) || 200) * ((data[key] && data[key].count) || 1);\n  });\n  return total;\n}\n\nexport function getTotalCount(store) {\n  const { cart } = store;\n  return Object.keys(cart.data).length;\n}\n\n\nexport const selectCart = ({ cart }) => cart.data;\n"]},"metadata":{},"sourceType":"module"}