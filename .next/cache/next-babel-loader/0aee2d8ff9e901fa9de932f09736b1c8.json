{"ast":null,"code":"import { put, takeLatest, select, call, all } from '@redux-saga/core/effects';\nimport { getAccompanyingProduct, getAccompanyingProductSuccess, getAccompanyingProductError } from './action';\nimport { selectCart } from '../cart/reducer';\nimport Axios from '../services/Axios';\nimport { selectLang } from '../user/reducer';\n\nfunction getAccompanyingProductRequest({\n  ids,\n  lang\n}) {\n  return Axios.request({\n    method: 'post',\n    url: '/api/product/escorting',\n    data: {\n      ids,\n      lang\n    }\n  });\n}\n\nfunction* workAccompanying() {\n  const ids = Object.keys(yield select(selectCart));\n  const lang = yield select(selectLang);\n\n  try {\n    if (!ids.length) throw new Error();\n    const {\n      data: {\n        escortingProducts\n      }\n    } = yield call(getAccompanyingProductRequest, {\n      ids,\n      lang\n    });\n    yield put(getAccompanyingProductSuccess({\n      data: escortingProducts\n    }));\n  } catch (error) {\n    yield put(getAccompanyingProductError());\n  }\n}\n\nfunction* watchAccompanying() {\n  yield takeLatest(getAccompanyingProduct, workAccompanying);\n}\n\nexport default function* () {\n  yield all([watchAccompanying()]);\n}","map":{"version":3,"sources":["/var/www/mankan-front/store/accompanying-product/saga.js"],"names":["put","takeLatest","select","call","all","getAccompanyingProduct","getAccompanyingProductSuccess","getAccompanyingProductError","selectCart","Axios","selectLang","getAccompanyingProductRequest","ids","lang","request","method","url","data","workAccompanying","Object","keys","length","Error","escortingProducts","error","watchAccompanying"],"mappings":"AAAA,SACEA,GADF,EACOC,UADP,EACmBC,MADnB,EAC2BC,IAD3B,EACiCC,GADjC,QAEO,0BAFP;AAGA,SACEC,sBADF,EAEEC,6BAFF,EAGEC,2BAHF,QAIO,UAJP;AAKA,SAASC,UAAT,QAA2B,iBAA3B;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,SAASC,UAAT,QAA2B,iBAA3B;;AAEA,SAASC,6BAAT,CAAuC;AAAEC,EAAAA,GAAF;AAAOC,EAAAA;AAAP,CAAvC,EAAsD;AACpD,SAAOJ,KAAK,CAACK,OAAN,CAAc;AACnBC,IAAAA,MAAM,EAAE,MADW;AAEnBC,IAAAA,GAAG,EAAE,wBAFc;AAGnBC,IAAAA,IAAI,EAAE;AAAEL,MAAAA,GAAF;AAAOC,MAAAA;AAAP;AAHa,GAAd,CAAP;AAKD;;AAED,UAAUK,gBAAV,GAA6B;AAC3B,QAAMN,GAAG,GAAGO,MAAM,CAACC,IAAP,CAAY,MAAMlB,MAAM,CAACM,UAAD,CAAxB,CAAZ;AACA,QAAMK,IAAI,GAAG,MAAMX,MAAM,CAACQ,UAAD,CAAzB;;AACA,MAAI;AACF,QAAI,CAACE,GAAG,CAACS,MAAT,EAAiB,MAAM,IAAIC,KAAJ,EAAN;AAEjB,UAAM;AACJL,MAAAA,IAAI,EAAE;AAAEM,QAAAA;AAAF;AADF,QAEF,MAAMpB,IAAI,CAACQ,6BAAD,EAAgC;AAC5CC,MAAAA,GAD4C;AAE5CC,MAAAA;AAF4C,KAAhC,CAFd;AAMA,UAAMb,GAAG,CAACM,6BAA6B,CAAC;AAAEW,MAAAA,IAAI,EAAEM;AAAR,KAAD,CAA9B,CAAT;AACD,GAVD,CAUE,OAAOC,KAAP,EAAc;AACd,UAAMxB,GAAG,CAACO,2BAA2B,EAA5B,CAAT;AACD;AACF;;AAED,UAAUkB,iBAAV,GAA8B;AAC5B,QAAMxB,UAAU,CAACI,sBAAD,EAAyBa,gBAAzB,CAAhB;AACD;;AACD,eAAe,aAAa;AAC1B,QAAMd,GAAG,CAAC,CACRqB,iBAAiB,EADT,CAAD,CAAT;AAGD","sourcesContent":["import {\n  put, takeLatest, select, call, all,\n} from '@redux-saga/core/effects';\nimport {\n  getAccompanyingProduct,\n  getAccompanyingProductSuccess,\n  getAccompanyingProductError,\n} from './action';\nimport { selectCart } from '../cart/reducer';\nimport Axios from '../services/Axios';\nimport { selectLang } from '../user/reducer';\n\nfunction getAccompanyingProductRequest({ ids, lang }) {\n  return Axios.request({\n    method: 'post',\n    url: '/api/product/escorting',\n    data: { ids, lang },\n  });\n}\n\nfunction* workAccompanying() {\n  const ids = Object.keys(yield select(selectCart));\n  const lang = yield select(selectLang);\n  try {\n    if (!ids.length) throw new Error();\n\n    const {\n      data: { escortingProducts },\n    } = yield call(getAccompanyingProductRequest, {\n      ids,\n      lang,\n    });\n    yield put(getAccompanyingProductSuccess({ data: escortingProducts }));\n  } catch (error) {\n    yield put(getAccompanyingProductError());\n  }\n}\n\nfunction* watchAccompanying() {\n  yield takeLatest(getAccompanyingProduct, workAccompanying);\n}\nexport default function* () {\n  yield all([\n    watchAccompanying(),\n  ]);\n}\n"]},"metadata":{},"sourceType":"module"}